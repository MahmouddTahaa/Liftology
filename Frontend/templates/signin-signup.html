<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>LIFTOLOGY | Sign Up / Sign In</title>
    <!-- Bootstrap 5 CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <!-- Google Fonts -->
    <link
      href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700&family=Roboto+Condensed:wght@400;700&display=swap"
      rel="stylesheet"
    />
    <!-- Icon -->
    <link rel="icon" type="image/x-icon" href="images/weightlifter.png" />
    <!-- Font Awesome -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <!-- Add SweetAlert2 CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11.7.32/dist/sweetalert2.min.css">
    <style>
      :root {
  /* Light theme */
  --primary: #e60026; /* Bold red */
  --primary-dark: #b3001d;
  --text-primary: #111111;  /* Very dark gray */
  --text-secondary: #444444;
  --bg-primary: #ffffff; /* Pure white */
  --bg-secondary: #f0f0f0;
  --bg-tertiary: #e5e5e5;
  --card-bg: #ffffff;
  --border-color: #d0d0d0;
  --success: #007f5f;
  --warning: #ff6f00;
  --darker: #000000;
}

[data-theme="dark"] {
  /* Dark theme */
  --primary: #ff0033; /* Vivid red for high contrast */
  --primary-dark: #cc0029;
  --text-primary: #ffffff; /* Pure white text */
  --text-secondary: #cccccc;
  --bg-primary: #0a0a0a;  /* Deep black background */
  --bg-secondary: #1a1a1a;
  --bg-tertiary: #2a2a2a;
  --card-bg: #1a1a1a;
  --border-color: #333333;
  --darker: #000000;
}


      body {
        font-family: "Montserrat", sans-serif;
        background-color: var(--bg-primary);
        color: var(--text-primary);
        line-height: 1.6;
        transition: background-color 0.3s ease, color 0.3s ease;
      }

      h1,
      h2,
      h3,
      h4,
      h5,
      h6 {
        font-family: "Roboto Condensed", sans-serif;
        font-weight: 700;
        color: var(--text-primary);
      }

      /* Navigation */
      .navbar {
        background-color: var(--bg-primary) !important;
        box-shadow: 0 2px 10px rgba(220, 53, 69, 0.1);
        padding: 20px 0;
        transition: all 0.3s ease;
      }

      .navbar.scrolled {
        padding: 15px 0;
        box-shadow: 0 4px 12px rgba(220, 53, 69, 0.15);
      }

      .navbar-brand {
        font-weight: 700;
        font-size: 1.8rem;
        color: var(--text-primary);
        letter-spacing: -0.5px;
      }

      .navbar-brand span {
        color: var(--primary);
      }

      .nav-link {
        color: var(--text-primary) !important;
        font-weight: 500;
        padding: 8px 15px !important;
        margin: 0 5px;
        position: relative;
        transition: all 0.3s ease;
      }

      .nav-link:hover {
        color: var(--primary) !important;
      }

      .nav-link.active {
        color: var(--primary) !important;
      }

      .nav-cta {
        background-color: var(--primary);
        color: var(--bg-primary) !important;
        padding: 10px 25px !important;
        border-radius: 30px;
        font-weight: 600;
        transition: all 0.3s ease;
        margin-left: 15px;
      }

      .nav-cta:hover {
        background-color: var(--primary-dark);
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(220, 53, 69, 0.3);
        color: white !important;
      }

      /* Theme Toggle Button */
      .theme-toggle {
        background: none;
        border: none;
        color: var(--text-primary);
        cursor: pointer;
        font-size: 1.25rem;
        padding: 0.5rem;
        border-radius: 50%;
        width: 40px;
        height: 40px;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: all 0.3s ease;
        margin-left: 15px;
      }

      .theme-toggle:hover {
        background-color: var(--bg-secondary);
        box-shadow: 0 4px 12px rgba(220, 53, 69, 0.15);
      }

      /* Form Section */
      .form-section {
        padding: 120px 0;
        background-color: var(--bg-primary);
      }

      .form-card {
        background-color: var(--card-bg);
        border-radius: 12px;
        padding: 40px;
        box-shadow: 0 20px 40px rgba(220, 53, 69, 0.1);
        border: none;
        max-width: 800px;
        margin: 0 auto;
        transition: all 0.3s ease;
      }

      .form-title {
        font-size: 2.5rem;
        margin-bottom: 30px;
        text-align: center;
        color: var(--text-primary);
      }

      .form-title span {
        color: var(--primary);
      }

      .form-floating {
        margin-bottom: 1.5rem;
      }

      .form-control,
      .form-select {
        background-color: var(--bg-secondary);
        color: var(--text-primary);
        border: none;
        height: 60px;
        padding: 0 20px;
        transition: all 0.3s ease;
      }

      .form-control:focus,
      .form-select:focus {
        background-color: var(--bg-tertiary);
        color: var(--text-primary);
        border: none;
        box-shadow: 0 0 0 0.25rem rgba(220, 53, 69, 0.25);
      }

      .form-floating > label {
        color: var(--text-secondary) !important;
        padding: 20px;
      }

      .form-floating > .form-control:focus ~ label,
      .form-floating > .form-control:not(:placeholder-shown) ~ label,
      .form-floating > .form-select ~ label {
        transform: scale(0.85) translateY(-0.8rem) translateX(0.15rem);
        color: var(--primary) !important;
      }

      .form-floating > .form-control:not(:placeholder-shown) ~ label::after {
        background-color: transparent;
      }

      .form-floating > .form-control:focus ~ label::after,
      .form-floating > .form-select ~ label::after {
        background-color: transparent;
      }

      .form-select option {
        background-color: var(--card-bg);
        color: var(--text-primary);
      }

      .form-select:invalid {
        color: var(--text-secondary);
      }

      .form-select:focus,
      .form-select:valid {
        color: var(--text-primary);
      }

      .btn-submit {
        background-color: var(--primary);
        color: var(--bg-primary);
        padding: 15px 30px;
        border-radius: 30px;
        font-weight: 600;
        border: none;
        transition: all 0.3s ease;
        width: 100%;
        margin-top: 1rem;
        font-size: 1.1rem;
      }

      .btn-submit:hover {
        background-color: var(--primary-dark);
        transform: translateY(-3px);
        box-shadow: 0 8px 20px rgba(220, 53, 69, 0.3);
      }

      .text-danger {
        margin-top: 0.5rem;
        font-size: 0.85rem;
        color: #ff6b6b;
      }

      .auth-toggle {
        text-align: center;
        margin-top: 2rem;
        color: var(--text-secondary);
      }

      .auth-toggle a {
        color: var(--primary);
        text-decoration: none;
        font-weight: 600;
        transition: all 0.2s ease;
      }

      .auth-toggle a:hover {
        text-decoration: underline;
      }

      /* Responsive Adjustments */
      @media (max-width: 768px) {
        .form-title {
          font-size: 2rem;
        }

        .form-card {
          padding: 30px;
        }

        .theme-toggle {
          position: fixed;
          bottom: 20px;
          right: 20px;
          background-color: var(--primary);
          color: var(--bg-primary);
          box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
          z-index: 1000;
        }
      }

      @media (max-width: 576px) {
        .form-title {
          font-size: 1.8rem;
        }

        .form-section {
          padding: 80px 0;
        }
      }

      /* SweetAlert2 Custom Styles */
      .swal2-popup {
        border-radius: var(--radius-lg) !important;
        box-shadow: var(--shadow-lg) !important;
        border: 1px solid var(--border-color) !important;
      }

      .swal2-title {
        color: var(--text-primary) !important;
        font-family: "Montserrat", sans-serif !important;
        font-weight: 600 !important;
      }

      .swal2-content {
        color: var(--text-secondary) !important;
        font-family: "Montserrat", sans-serif !important;
      }

      .swal2-confirm {
        background-color: var(--primary) !important;
        border-radius: var(--radius-md) !important;
        font-family: "Montserrat", sans-serif !important;
        font-weight: 500 !important;
        box-shadow: var(--shadow-sm) !important;
        transition: all 0.3s ease !important;
      }

      .swal2-confirm:hover {
        background-color: var(--primary-dark) !important;
        transform: translateY(-2px) !important;
        box-shadow: var(--shadow-md) !important;
      }

      .swal2-timer-progress-bar {
        background: var(--primary) !important;
      }

      /* Success icon color */
      .swal2-icon.swal2-success {
        border-color: var(--primary) !important;
      }

      .swal2-icon.swal2-success [class^='swal2-success-line'] {
        background-color: var(--primary) !important;
      }

      .swal2-icon.swal2-success .swal2-success-ring {
        border-color: var(--primary) !important;
      }

      /* Error icon color */
      .swal2-icon.swal2-error {
        border-color: var(--primary) !important;
      }

      .swal2-icon.swal2-error [class^='swal2-x-mark-line'] {
        background-color: var(--primary) !important;
      }
    </style>
  </head>

  <body>
    <!-- Navigation -->
    <nav id="navbar" class="navbar navbar-expand-lg navbar-light fixed-top">
      <div class="container">
        <a class="navbar-brand" href="index.html">LIFT<span>OLOGY</span></a>
        <button
          class="navbar-toggler"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#navbarNav"
        >
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
          <ul class="navbar-nav ms-auto">
            <li class="nav-item">
              <a class="nav-link" href="index.html">Home</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="index.html#features">Features</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="index.html#how-it-works"
                >How It Works</a
              >
            </li>
            <li class="nav-item">
              <a class="nav-link nav-cta" href="form.html">Get Started</a>
            </li>
            <li class="nav-item">
              <button class="theme-toggle" id="themeToggle">
                <i class="fas fa-moon"></i>
              </button>
            </li>
          </ul>
        </div>
      </div>
    </nav>

    <!-- Form Section -->
    <section class="form-section">
      <div class="container">
        <div class="form-card">
          <h1 class="form-title" id="formTitle">
            Create Your <span>Account</span>
          </h1>
          <form id="authForm" novalidate>
            <!-- Sign Up Fields (shown by default) -->
            <div id="signupFields">
              <div class="row">
                <div class="col-md-6">
                  <div class="form-floating">
                    <input
                      name="First_name"
                      type="text"
                      id="firstName"
                      class="form-control"
                      placeholder="First Name"
                      title="Must contain at least 2 letters, only alphabets allowed"
                      required
                    />
                    <p class="text-danger d-none">
                      Please enter a valid first name (letters only, min 2
                      chars)
                    </p>
                    <label for="firstName">First Name</label>
                  </div>
                </div>
                <div class="col-md-6">
                  <div class="form-floating">
                    <input
                      name="Last_name"
                      type="text"
                      id="lastName"
                      class="form-control"
                      placeholder="Last Name"
                      title="Must contain at least 2 letters, only alphabets allowed"
                      required
                    />
                    <p class="text-danger d-none">
                      Please enter a valid last name (letters only, min 2 chars)
                    </p>
                    <label for="lastName">Last Name</label>
                  </div>
                </div>
              </div>

              <div class="row">
                <div class="col-12">
                  <div class="form-floating">
                    <input
                      name="email"
                      type="email"
                      id="email"
                      class="form-control"
                      placeholder="Email"
                      title="Must be a valid email address (e.g., example@domain.com)"
                      required
                    />
                    <p class="text-danger d-none">
                      Please enter a valid email address
                    </p>
                    <label for="email">Email</label>
                  </div>
                </div>
              </div>

              <div class="row">
                <div class="col-12">
                  <div class="form-floating">
                    <input
                      name="password"
                      type="password"
                      id="password"
                      class="form-control"
                      placeholder="Password"
                      title="Must be at least 8 characters long, contain at least one uppercase letter, and one special character (!@#$%^&*(),.?\:{}|<>)"
                      required
                      minlength="8"
                    />
                    <p class="text-danger d-none">
                      Must be at least 8 characters long, contain at least one uppercase letter, and one special character (!@#$%^&*(),.?\:{}|<>)
                    </p>
                    <label for="password">Password</label>
                  </div>
                </div>
              </div>

              <div class="row">
                <div class="col-md-6">
                  <div class="form-floating">
                    <input
                      name="Phone_number"
                      type="tel"
                      id="phone"
                      class="form-control"
                      placeholder="Phone Number"
                      title="Optional: Enter your phone number"
                    />
                    <p class="text-danger d-none">
                      Please enter a valid phone number (10-15 digits)
                    </p>
                    <label for="phone">Phone Number (Optional)</label>
                  </div>
                </div>
                <div class="col-md-6">
                  <div class="form-floating">
                    <select class="form-select" id="country">
                      <option value="" selected disabled>Select Country</option>
                      <option value="eg">Egypt</option>
                      <option value="qa">Qatar</option>
                      <option value="ps">Palestine</option>
                      <option value="ksa">Saudi Arabia</option>
                      <option value="om">Oman</option>
                      <option value="fr">France</option>
                      <option value="uk">England</option>
                      <option value="Other">Other</option>
                    </select>
                    <label for="country">Country (Optional)</label>
                  </div>
                </div>
              </div>
            </div>

            <!-- Sign In Fields (hidden by default) -->
            <div id="signinFields" style="display: none">
              <div class="row">
                <div class="col-12">
                  <div class="form-floating">
                    <input
                      name="email"
                      type="text"
                      id="signinEmail"
                      class="form-control"
                      placeholder="Email"
                      title="Must be a valid email address (e.g., example@domain.com)"
                      required
                    />
                    <p class="text-danger d-none">
                      Please enter a valid email address
                    </p>
                    <label for="signinEmail">Email</label>
                  </div>
                </div>
              </div>

              <div class="row">
                <div class="col-12">
                  <div class="form-floating">
                    <input
                      name="password"
                      type="password"
                      id="signinPassword"
                      class="form-control"
                      placeholder="Password"
                      title="Must be at least 8 characters long"
                      required
                      minlength="8"
                    />
                    <p class="text-danger d-none">
                      Password must be at least 8 characters, and contain at least one uppercase letter, one special character.
                    </p>
                    <label for="signinPassword">Password</label>
                  </div>
                </div>
              </div>
            </div>

            <button class="btn btn-submit" type="submit" id="submitBtn">
              Sign Up <i class="fas fa-arrow-right ms-2"></i>
            </button>

            <div class="auth-toggle">
              <span id="toggleText">Already have an account?</span>
              <a href="#" id="toggleLink">Sign In</a>
            </div>
          </form>
        </div>
      </div>
    </section>

    <!-- Dependencies -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Add SweetAlert2 JS -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.7.32/dist/sweetalert2.all.min.js"></script>

    <script>
      // Navbar scroll effect
      window.addEventListener("scroll", function () {
        const navbar = document.querySelector(".navbar");
        if (window.scrollY > 50) {
          navbar.classList.add("scrolled");
        } else {
          navbar.classList.remove("scrolled");
        }
      });

      // Theme Toggle Functionality
      const themeToggle = document.getElementById("themeToggle");
      const prefersDarkScheme = window.matchMedia(
        "(prefers-color-scheme: dark)"
      );

      // Check for saved theme preference or use system preference
      const currentTheme =
        localStorage.getItem("theme") ||
        (prefersDarkScheme.matches ? "dark" : "light");

      // Apply the current theme
      if (currentTheme === "dark") {
        document.documentElement.setAttribute("data-theme", "dark");
        themeToggle.innerHTML = '<i class="fas fa-sun"></i>';
      } else {
        document.documentElement.removeAttribute("data-theme");
        themeToggle.innerHTML = '<i class="fas fa-moon"></i>';
      }

      // Toggle theme on button click
      themeToggle.addEventListener("click", () => {
        let theme;
        if (document.documentElement.getAttribute("data-theme")) {
          document.documentElement.removeAttribute("data-theme");
          theme = "light";
          themeToggle.innerHTML = '<i class="fas fa-moon"></i>';
        } else {
          document.documentElement.setAttribute("data-theme", "dark");
          theme = "dark";
          themeToggle.innerHTML = '<i class="fas fa-sun"></i>';
        }
        localStorage.setItem("theme", theme);
      });

      // Listen for system theme changes
      prefersDarkScheme.addEventListener("change", (e) => {
        if (!localStorage.getItem("theme")) {
          if (e.matches) {
            document.documentElement.setAttribute("data-theme", "dark");
            themeToggle.innerHTML = '<i class="fas fa-sun"></i>';
          } else {
            document.documentElement.removeAttribute("data-theme");
            themeToggle.innerHTML = '<i class="fas fa-moon"></i>';
          }
        }
      });

      // Toggle between Sign Up and Sign In forms
      const toggleLink = document.getElementById("toggleLink");
      const toggleText = document.getElementById("toggleText");
      const signupFields = document.getElementById("signupFields");
      const signinFields = document.getElementById("signinFields");
      const formTitle = document.getElementById("formTitle");
      const submitBtn = document.getElementById("submitBtn");
      let isSignIn = false;
      const BASE_URL = "https://liftologybackend-production.up.railway.app";

      toggleLink.addEventListener("click", (e) => {
        e.preventDefault();
        isSignIn = !isSignIn;

        if (isSignIn) {
          signupFields.style.display = "none";
          signinFields.style.display = "block";
          formTitle.innerHTML = "Sign In to <span>LIFTOLOGY</span>";
          submitBtn.textContent = "Sign In";
          toggleText.textContent = "Don't have an account?";
          toggleLink.textContent = "Sign Up";
        } else {
          signupFields.style.display = "block";
          signinFields.style.display = "none";
          formTitle.innerHTML = "Create Your <span>Account</span>";
          submitBtn.textContent = "Sign Up";
          toggleText.textContent = "Already have an account?";
          toggleLink.textContent = "Sign In";
        }
      });

      document
        .getElementById("authForm")
        .addEventListener("submit", async (e) => {
          e.preventDefault();

          if (isSignIn) {
            // Sign In logic
            const isValid =
              validateInput(
                document.getElementById("signinEmail"),
                /^[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,}$/
              ) &&
              validateInput(
                document.getElementById("signinPassword"),
                /^.{8,}$/
              );

            if (isValid) {
              try {
                const email = document.getElementById("signinEmail").value;
                const password =
                  document.getElementById("signinPassword").value;

                // Login request
                const response = await fetch(`${BASE_URL}/login`, {
                  method: "POST",
                  headers: {
                    "Content-Type": "application/json",
                  },
                  body: JSON.stringify({ email, password }),
                });

                if (!response.ok) {
                  const errorData = await response.json().catch(() => ({}));
                  const message =
                    errorData.message ||
                    errorData.detail ||
                    `Login failed: ${response.statusText}`;
                  throw new Error(message);
                }

                // Fetch user data
                const userResponse = await fetch(`${BASE_URL}/user/${email}`);
                if (!userResponse.ok) {
                  throw new Error("Failed to fetch user data.");
                }

                const userData = await userResponse.json();
                localStorage.setItem("currentUser", JSON.stringify(userData));
                console.log("User Data:", userData);

                // Redirect based on exercise plan status
                if (userData.exercise_plan?.output) {
                  window.location.href = "index.html";
                } else {
                  window.location.href = "form.html";
                }
              } catch (error) {
                console.error("Sign-in error:", error);
                Swal.fire({
                  icon: "error",
                  title: "Sign-In Failed",
                  text:
                    error.message || "Something went wrong. Please try again.",
                });
              }
            }
          } else {
            // Sign Up logic
            const isValid =
              validateInput(
                document.getElementById("firstName"),
                /^[A-Za-z]{2,}$/
              ) &&
              validateInput(
                document.getElementById("lastName"),
                /^[A-Za-z]{2,}$/
              ) &&
              validateInput(
                document.getElementById("email"),
                /^[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,}$/
              ) &&
              validateInput(document.getElementById("password"), /^.{8,}$/);

            if (isValid) {
              // Additional password validation for signup
              const password = document.getElementById("password").value;
              if (!validatePassword(password)) {
                return;
              }

              try {
                const userData = {
                  first: document.getElementById("firstName").value,
                  last: document.getElementById("lastName").value,
                  email: document.getElementById("email").value,
                  password: document.getElementById("password").value,
                  phone: document.getElementById("phone").value || null,
                  country: document.getElementById("country").value || null,
                };

                const response = await fetch(`${BASE_URL}/signup`, {
                  method: "POST",
                  headers: {
                    "Content-Type": "application/json",
                    Accept: "application/json",
                  },
                  body: JSON.stringify({
                    First_name: userData.first,
                    Last_name: userData.last,
                    email: userData.email,
                    password: userData.password,
                    Phone_number: userData.phone,
                    country: userData.country,
                  }),
                });

                if (!response.ok) {
                  const errorData = await response.json().catch(() => ({}));
                  const message =
                    errorData.message ||
                    errorData.detail ||
                    `Login failed: ${response.statusText}`;
                  throw new Error(message);
                }

                const userResponse = await fetch(
                  `${BASE_URL}/user/${userData.email}`
                );
                if (!userResponse.ok) {
                  throw new Error("Failed to fetch user data after signup.");
                }

                const newUser = await userResponse.json();
                localStorage.setItem("currentUser", JSON.stringify(newUser));

                Swal.fire({
                  icon: "success",
                  title: "Account Created Successfully!",
                  text: "You can now sign in with your credentials.",
                  confirmButtonText: "Sign In",
                  showCancelButton: true,
                  cancelButtonText: "Stay Logged In"
                }).then((result) => {
                  if (result.isConfirmed) {
                    // Switch to sign in form
                    isSignIn = true;
                    signupFields.style.display = "none";
                    signinFields.style.display = "block";
                    formTitle.innerHTML = "Sign In to <span>LIFTOLOGY</span>";
                    submitBtn.textContent = "Sign In";
                    toggleText.textContent = "Don't have an account?";
                    toggleLink.textContent = "Sign Up";
                    
                    // Clear the signup form
                    document.getElementById("authForm").reset();
                  } else {
                    // Set currentUser to the newly created user
                    localStorage.setItem("currentUser", JSON.stringify(newUser));
                    
                    // Redirect based on exercise plan status
                    if (newUser.exercise_plan?.output) {
                      window.location.href = "index.html";
                    } else {
                      window.location.href = "form.html";
                    }
                  }
                });
              } catch (error) {
                console.error("Signup error:", error);
                Swal.fire({
                  icon: "error",
                  title: "Signup Failed",
                  text:
                    error.message || "Something went wrong. Please try again.",
                });
              }
            }
          }
        });

      function validateInput(input, regex) {
        // Skip validation if field is hidden
        if (input.offsetParent === null) return true;

        const value = input.value;
        const bool = regex.test(value);
        input.classList.toggle("is-valid", bool);
        input.classList.toggle("is-invalid", !bool);

        let nextSibling = input.nextElementSibling;
        while (nextSibling) {
          if (
            nextSibling.classList &&
            nextSibling.classList.contains("text-danger")
          ) {
            nextSibling.classList.toggle("d-none", bool);
            break;
          }
          nextSibling = nextSibling.nextElementSibling;
        }

        return bool;
      }

      // Password validation function
      function validatePassword(password) {
        const hasMinLength = password.length >= 8;
        const hasCapitalLetter = /[A-Z]/.test(password);
        const hasSpecialChar = /[!@#$%^&*(),.?":{}|<>]/.test(password);
        
        if (!hasMinLength) {
          Swal.fire({
            icon: "error",
            title: "Invalid Password",
            text: "Password must be at least 8 characters long."
          });
          return false;
        }
        
        if (!hasCapitalLetter) {
          Swal.fire({
            icon: "error",
            title: "Invalid Password",
            text: "Password must contain at least one capital letter."
          });
          return false;
        }
        
        if (!hasSpecialChar) {
          Swal.fire({
            icon: "error",
            title: "Invalid Password",
            text: "Password must contain at least one special character (!@#$%^&*(),.?\":{}|<>)."
          });
          return false;
        }
        
        return true;
      }

      // Add input validation on keyup for all fields
      const inputs = document.querySelectorAll(".form-control");
      inputs.forEach((input) => {
        input.addEventListener("keyup", () => {
          let isValid = false;
          let errorMessage = "";

          switch (input.id) {
            case "firstName":
            case "lastName":
              isValid = /^[A-Za-z]{2,}$/.test(input.value);
              errorMessage = "Must contain at least 2 letters, only alphabets allowed";
              break;
            case "email":
            case "signinEmail":
              isValid = /^[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,}$/.test(
                input.value
              );
              errorMessage = "Please enter a valid email address";
              break;
            case "password":
              const hasMinLength = input.value.length >= 8;
              const hasCapitalLetter = /[A-Z]/.test(input.value);
              const hasSpecialChar = /[!@#$%^&*(),.?":{}|<>]/.test(input.value);
              isValid = hasMinLength && hasCapitalLetter && hasSpecialChar;
              errorMessage = "Must be at least 8 characters long, contain at least one uppercase letter, and one special character (!@#$%^&*(),.?\":{}|<>)"
              break;
            case "signinPassword":
              isValid = input.value.length >= 8;
              errorMessage = "Password must be at least 8 characters";
              break;
            case "phone":
              isValid = input.value === "" || /^\+?[\d\s-]{10,}$/.test(input.value);
              errorMessage = "Please enter a valid phone number";
              break;
            case "country":
              isValid = input.value === "" || input.value.length >= 2;
              errorMessage = "Please enter a valid country name";
              break;
          }

          const errorElement = input.nextElementSibling;
          if (errorElement && errorElement.classList.contains("text-danger")) {
            if (!isValid && input.value !== "") {
              errorElement.textContent = errorMessage;
              errorElement.classList.remove("d-none");
              input.classList.remove("is-valid");
              input.classList.add("is-invalid");
            } else {
              errorElement.classList.add("d-none");
              if (isValid) {
                input.classList.remove("is-invalid");
                input.classList.add("is-valid");
              } else {
                input.classList.remove("is-valid");
                input.classList.remove("is-invalid");
              }
            }
          }
        });
      });
    </script>
  </body>
</html>
